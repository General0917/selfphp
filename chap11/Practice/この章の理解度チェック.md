# この章の理解度チェック

## 次の表は、Webアプリケーションの脆弱性についてまとめたものである

|  名前  |  概要  |
| ---- | ---- |
|  **クロスサイトスクリプティング**(**XSS**)  |  エンドユーザーからの入力などによって生成されるページで、**エスケープ処理**の漏れなどが原因で、不正なスクリプトを実行されてしまう脆弱性  |
|  **SQLインジェクション**  |  **SQL**命令に不正なパラメータを引き渡すことで、本来、開発者が意図していなかった**SQL**命令が生成/実行されてしまう脆弱性  |
|  **クロスサイトリクエストフォージェリ**(**CSRF**)  |  サイトに攻撃用のスクリプトを仕込んでおくことで、アクセスしてきたユーザに意図せぬ操作を強制させる攻撃  |
|  **パストラバーサル**  |  本来想定していたパスをさかのぼって、自由にファイルを読み書きされてしまう脆弱性  |
|  **メールヘッダインジェクション**  |  メールヘッダに不正なヘッダ情報を混入させることで、**スパムメール**などを送信させる攻撃  |
|  **セッションハイジャック**  |  **セッションID**を盗聴することで、セッションそのものを乗っ取る攻撃  |
|  **インクルード攻撃**  |  **require_once**命令などに対して、不正なパスを引き渡す攻撃  |
|  **eval攻撃**  |  **eval**関数に対して不正なコードを引き渡す攻撃  |

## 次の文書は、脆弱性対策について述べたものである。正しいものには〇を誤っているものには×を付け、間違いを説明せよ

- XSS脆弱性を回避する基本は、スーパーグローバル変数の内容をエスケープ処理することである。（**×**）
  - ユーザーからの直接の入力だけではない。データベースや外部サービスから取得したデータもまた、もともとはユーザから入力された値である可能性がある。すべての動的な値がエスケープの対象である。

- すべての出力をHTMLエスケープすれば、XSS脆弱性は必ず防げる。（**×**）
  - 「<a href="<?=$url ?>">リンク</a>」のようなコードでは、エスケープ処理だけではXSSを防げない。

- SQLインジェクションを回避する最良の方法は、個々の値を手動でSQLエスケープすることである。（**×**）
  - 個々の値をエスケープ処理するのは間違いや漏れの原因となる。プレイスホルダを利用するべきである。

- OSコマンドはパフォーマンス的に有利なので、積極的に利用するとよい。（**×**）
  - 脆弱性があった場合に致命的な問題となる可能性がある。最大限、同等の機能を持つライブラリなどで代替することをけ検討するべきである。

- CSRF攻撃は、ページに対して認証を施しておけば防げる。（**×**）
  - CSRFでは、現在のユーザ権限でスクリプトを実行するので、ユーザが認証済みの状態であれば攻撃を防ぐことはできない。

- パストラバーサル脆弱性を防ぐ基本は、ファイルパスをクライアント/サーバ間で直接に受け渡ししないことである。（**〇**）
  - やむを得ず、パスの受け渡しをする場合はホワイトリストによるチェックが必須である。

- 入力値の検証をしていれば、セキュリティ的な対策が不十分でも安心である。（**×**）
  - 入力値の検証は一時的な防御手段として有効ですが、他のセキュリティ対策が不要になるわけではない。

- 検証処理をサーバ/クライアント双方で実装するのは非効率なので、クライアントサイド処理で一元化するのが望ましい。（**×**）
  - 検証処理はクライアント/サーバサイド双方で行うべきである。もしも片方でしか実施できない場合は、必ずサーバサイドで実装する。
